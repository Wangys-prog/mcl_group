#!/usr/bin/python
#File created on 2019/7/18

__author__ = "Wang,Yansu"
__copyright__ = "Copyright 2019, JSNU"
__license__ = "GPL"
__version__ = "2.0"
__maintainer__ = "Wang,yansu"
__email__ = "Wangys_c@hotmail.com"


from optparse import OptionParser

def MakeOption():
    """
    Input file format(-i) : outfile from del_Brackets.py
     Bg<22>:	OG0000018	OG0000032	OG0000035	OG0000037	OG0000088	OG0000107	OG0000110	OG0000135	OG0000136	OG0000150	OG0000179	OG0000306	OG0000328	OG0000419	OG0000473	OG0000501	OG0000528	OG0000596	OG0000652	OG0000954	OG0001132	OG0001136	OG0001484	OG0006359	OG0006361	OG0006696	OG0006697	OG0006849	OG0006882	OG0007075	OG0007076	OG0007077	OG0007511	OG0007514	OG0008362	OG0008363
    Um<4>:	OG0000308	OG0000418	OG0000726	OG0001108	OG0001256	OG0001395	OG0001847	OG0002971	OG0004707	OG0006752
    Vi<18>:	OG0000001	OG0000003	OG0000012	OG0000022	OG0000024	OG0000042	OG0000045	OG0000047	OG0000049	OG0000050	OG0000051	OG0000052	OG0000056	OG0000060	OG0000061	OG0000073	OG0000094	OG0000096	OG0000097	OG0000102	OG0000103	OG0000105	OG0000108	OG0000130	OG0000143	OG0000152	OG0000154	OG0000156	OG0000162	OG0000165	OG0000209	OG0000214	OG0000226	OG0000230	OG0000239	OG0000266	OG0000267	OG0000273	OG0000305	OG0000331	OG0000358	OG0000359	OG0000385	OG0000410	OG0000417	OG0000423	OG0000454	OG0000469	OG0000565	OG0000569	OG0000590	OG0000603	OG0000682	OG0000725	OG0000734	OG0000771	OG0000775	OG0000787	OG0000812	OG0000814	OG0000815	OG0000821	OG0000826	OG0000845	OG0000860	OG0000909	OG0000957	OG0001013	OG0001030	OG0001041	OG0001058	OG0001180	OG0001383	OG0001501	OG0001572	OG0001573	OG0001576	OG0001580	OG0001581	OG0001987	OG0002243	OG0002955	OG0004006	OG0004586	OG0004612	OG0004613	OG0005047	OG0005053	OG0005062	OG0005118	OG0005125	OG0005389	OG0005533	OG0005558	OG0005867	OG0005880	OG0005902	OG0005994	OG0006100	OG0006165	OG0006325	OG0006382	OG0006479	OG0006544	OG0006555	OG0006700	OG0006810	OG0006853	OG0006901	OG0006918	OG0006993	OG0007116	OG0007139	OG0007309	OG0007341	OG0007552	OG0007572	OG0007585	OG0007601	OG0007750	OG0007987	OG0008022	OG0008156	OG0008375	OG0008565	OG0009291	OG0009300	OG0009379	OG0009466
   <33>:	OG0000000	OG0000001	OG0000002	OG0000004	OG0000008	OG0000009	OG0000011	OG0000012	OG0000013	OG0000014	OG0000019	OG0000025	OG0000027	OG0000030	OG0000031	OG0000036	OG0000037	OG0000053	OG0000054	OG0000055	OG0000066	OG0000067	OG0000077	OG0000086	OG0000095	OG0000096	OG0000106	OG0000112	OG0000127	OG0000129	OG0000140	OG0000161	OG0000164	OG0000170	OG0000174	OG0000178	OG0000184	OG0000187	OG0000189	OG0000211	OG0000217	OG0000218	OG0000226	OG0000227	OG0000228	OG0000236	OG0000257	OG0000258	OG0000261	OG0000262	OG0000263	OG0000268	OG0000275	OG0000291	OG0000304	OG0000308	OG0000309	OG0000345	OG0000349	OG0000363	OG0000373	OG0000392	OG0000393	OG0000396	OG0000403	OG0000429	OG0000430	OG0000438	OG0000448	OG0000457	OG0000496	OG0000532	OG0000534	OG0000537	OG0000538	OG0000544	OG0000554	OG0000559	OG0000560	OG0000564	OG0000582	OG0000592	OG0000597	OG0000603	OG0000605	OG0000619	OG0000627	OG0000643	OG0000654	OG0000665	OG0000667	OG0000668	OG0000679	OG0000689	OG0000700	OG0000702	OG0000719	OG0000762	OG0000774	OG0000781	OG0000793	OG0000796	OG0000824	OG0000834	OG0000842	OG0000843	OG0000854	OG0000860	OG0000867	OG0000876	OG0000879	OG0000887	OG0000894	OG0000895	OG0000903	OG0000940	OG0000953	OG0000956	OG0000958	OG0000996	OG0001002	OG0001003	OG0001030	OG0001031	OG0001044	OG0001050	OG0001052	OG0001060	OG0001083	OG0001113	OG0001134	OG0001181	OG0001209	OG0001253	OG0001261	OG0001262	OG0001274	OG0001378	OG0001382	OG0001417	OG0001525	OG0001539	OG0001576	OG0001578	OG0001648	OG0001686	OG0001825	OG0001828	OG0001835	OG0001856	OG0001928	OG0001941	OG0001987	OG0002304	OG0002421	OG0002423	OG0002468	OG0002947	OG0002960	OG0002964	OG0003115	OG0003127	OG0003792	OG0003891	OG0003953	OG0003960	OG0004085	OG0004600	OG0004628	OG0004629	OG0004656	OG0004703	OG0005037	OG0005062	OG0005063	OG0005370	OG0005679	OG0005731	OG0005954	OG0006069	OG0006132	OG0006239	OG0006241	OG0006313	OG0006378	OG0006422	OG0006538	OG0006759	OG0006780	OG0006798	OG0006878	OG0007092	OG0007805
  <25>:	OG0000018	OG0000032	OG0000035
   Input file format(-f): outfile from del_Brackets.py
   OG0000000
   OG0000001
  OG0000002
  OG0000003
  OG0000004
  OG0000005
  OG0000006
    """
    # make option
    parser = OptionParser(usage="%prog [-h] [-v] -i[--input=] -f [ref=] -o[--output=]",
                          version="%prog 1.0")
    parser.add_option("-i", "--input", action="store", dest="input",
                      help="group.txt",
                      default=False)
    parser.add_option("-f", "--ref", action="store", dest="id",
                      help="sample_id.txt",
                      default=False)
    parser.add_option("-o", "--output", action="store", dest="output",
                      help="Rapidly evolving families",
                      default=False)
    (options, args) = parser.parse_args()
    # extract option from command line
    input = options.input
    id = options.id
    output = options.output
    return (input,id, output)

def main():
    input,id,output = MakeOption()
    output = open(output,"w")
    input_file = open(input,"r")
    id = open (id, "r")
    id_dict = {}
    output.write("sample"+ "\t")
    for i in id:
        i = i.replace("\n", "")
        id_dict[i] = 0
        output.write("%s\t" % (i))
    output.write("\n")
    for line in input_file:
        a = []
        group = line.split(":")[0].strip()
        a.append(group + "")
        b = list(line.strip().split("\t")[1:])
        for key in id_dict:
            id_dict[key] = b.count(key)
            a.append(str(id_dict[key]))
        output.write("%s\n" % ("\t".join(a)))
     output.close()
if __name__ == '__main__':
     main()

